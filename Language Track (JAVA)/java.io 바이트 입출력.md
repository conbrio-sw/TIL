## 22.01.4
# 입출력 개요 및 입출력 API
### 입출력 개요
- 입출력 스트림의 개념
  + 입출력 프로그래밍
    * 필요정보---입력--->자바 프로그램
    * 수행결과---출력--->출력 장치
  + 입출력 스트림
    * stream : 순서가 있는 일련의 데이터
    * 다양한 경로로의 입출력을 구현하는 일관된 방식 제공
    * 다양한 입출력 장치들
      * 메모리
      * 파일
      * 네트워크 등 
    * Source(키보드, 파일, 네트워크 등의 데이터의 근원지) 
    * ---data--->(Input Stream : 근원지에서 흘러들어오는 데이터)(Read)
    * Program
    * ---data--->(Output Stream : 목적지로 흘러가는 데이터)(Write)
    * Destination : 모니터, 파일, 네트워크 등의 데이터의 목적지
- 입출력 스트림의 특징
  + 순차적인 데이터의 흐름으로 데이터의 무작위적인 접근이 불가능함
  + 단방향의 흐름으로 입력 스트림과 출력 스트림이 따로 존재함
  + 모든 데이터의 입출력이 근원지, 목적지의 형태와 관계없이 일정한 형태로 전송됨
    * 동일한 방법으로 프로그램이 작성될 수 있는 유연한 구조의 API를 가짐
  + 자바는 입출력을 위해 스트림을 생성하고 다루는 클래스들을 java.io 패키지를 통해 제공하고 있음
- java.io 패키지
  + 자바로 입출력 기능을 구현하는 프로그램을 개발하는데 필요한 다양한 클래스를 포함함
  + File 클래스 : 파일이나 폴더를 다루는데 이용됨
  + RandomAccessFile 클래스 : 파일에 무작위적인 접근을 가능하게함
  + 스트림 클래스 : 입출력 스트림을 가능하게 함
- 스트림 클래스의 분류
  + 입출력 단위에 의한 분류
    * 바이트 단위의 입출력 클래스
    * 캐릭터 단위의 입출력 클래스
  + 데이터 이동 통로에 의한 분류
    + 1차 스트림 클래스 : 데이터가 이동하는 통로를 직접 만드는 클래스
    + 2차 스트림 클래스 : 이미 만들어져 있는 통로에 새로운 기능을 더하는 클래스
  + 바이트 단위와 캐릭터 단위는 서로 호환하지 않는 것을 원칙으로 함
- File 클래스
  + 입출력 프로그램의 기본은 파일과 관련된 데이터의 입출력 => 파일을 제어하기 위한 File 클래스 제공
  + File 클래스로 파일과 디렉토리를 모두 표현하고 관리할 수 있음
    * 파일이 실제로 존재하는 지 알 수 있음
    * 파일 복사 가능
    * 파일의 이름 변경 가능
  + File 클래스 자체에서는 파일의 데이터를 입출력하기 위한 매서드는 제공하지 않음
    * 데이터의 입출력은 스트림 클래스를 기반으로 수행
  + File 클래스로부터 생성된 객체는 변경할 수 없음
    * File 객체에 의해 표현되는 추상 경로명은 절대로 변하지 않음
  + 파일 클래스로부터 객체를 생성하는 일반적인 방법
  ```java
  File file = new File("C:\Program Files "); // C:\Program Files 디렉토리에 해당하는 파일 객체 생성
  File file = new File(".");  //  현재 작업 디렉토리에 해당하는 파일 객체 생성 | '.'은 현재 작업 디렉토리를 의미함
  File file = new File("./systemLog.log"); // 현재 작업 디렉토리 밑에 위치한 파일에 대한 파일 객체 생성
  ```
# 바이트 스트림
### 바이트 스트림
- 바이트 스트림 개요
  + 8비트의 바이트를 읽고 쓰기 위한 스트림
  + 모두 바이트 단위로 입출력을 수행한다는 공통적인 특징과 함께 각 클래스들만의 고유한 기능을 가짐
  + 어떤 클래스는 입출력 장치를 대상으로 직접 입출력을 하는 반면, 다른 클래스를 대상으로 입출력을 하는 클래스도 존재함
  + 자바에서는 두 개 이상의 클래스를 연결한 입출력 스트림을 생성해서 입출력을 하는 경우가 매우 일반적임
- InputStream
  + 바이트 단위 입력 스트림의 최상위 클래스로 추상 클래스로 정의되어 있기 때문에 스스로 객체화 될 수 없음
  + InputStream을 상속한 자식 클래스는 InputStream 클래스에 존재하는 모든 추상 매서드를 적절하게 Overriding 해야함
  + InputStream 클래스를 상속한 자식 클래스의 객체를 생성하여 입력 관련 로직을 구현할 수 있음
  + read() 매서드
    * 데이터를 읽어 들이는 기능을 제공
    * 입력 스트림에서 하나의 바이트를 읽어 들임
    * EOF를 만나면 -1을 반환하여 읽기 작업이 끝났다는 것을 알려줌
  + read(byte[] buf) 매서드
    * 사용자가 지정한 byte[]를 이용하여 한꺼번에 원하는 양을 읽어들일 수 있음
    * 일반적으로 available() 매서드를 사용하여 스트림에서 읽을 수 있는 바이트 수를 얻을 후 이를 기준으로 byte[] 생성하여 한꺼번에 읽을 수 있음
  + EOF(End Of File)의 의미
    * InputStream에서 제공되는 read() 매서드는 리턴형이 byte가 아니라 int이다.
    * 자바의 숫자 체계는 바이트를 기준으로 -128~127까지 표현이 가능
    * read() 매서드를 통해서 읽는 값은 양수를 기준으로 표현하는데, 이 경우에는 0~127까지의 128개만 사용
    * 이를 해결하기 위한 방법으로 더 큰 자료형을 리턴으로 사용하여 0~255까지 사용할 수 있게 하고 -1을 특수한 입력 값으로 처리하도록 구성하기 위해서 int 형으로 반환 
- OutputStream
  + 바이트 단위의 출력을 대표하는 최상위 클래스임
  + 이 클래스에 정의되어 있는 매서드는 자식 클래스가 상ㅇ속받아서 그대로 사용하거나 재정의하여 사용함
  + 가장 중요한 매서드는 write(int i) 매서드임
    * 1바이트를 출력하는 매서드로서, 매서드의 인자도 바이트가 아닌 정수형을 사용함
    * write(int i) 매서드에는 3개의 매서드가 Overloading 됨
      - 인자로 byte[]를 사용하는 것
      - 배열과 함께 시작 위치 및 크기를 지정하는 매서드 (출력하고자 하는 배열의 지정된 위치에서 정해진 크기만큼 출력이 가능함을 알 수 있음
      - 출력이 끝났음을 알려주기 위한 flush()매서드
        - 버퍼는 일종의 완충지대로 입출력을 조금 더 빨리 할 수 있게 도와줌
        - 모든 출력을 도착 지점으로 바로 나가지 않고 먼저 버퍼에 쌓임
        - 버퍼에 데이터가 충분히 쌓인 후 flush() 명령을 받으면 현재 버퍼에 있던 모든 내용을 도착 지점으로 내보내고 버퍼를 비워버림
        - flush() 매서드를 호출하지 않으면 버퍼로만 출력되기 때문에 실제로 도착 지점에서는 아무런 데이터를 받지 못하는 경우가 발생할 수 있음
        * 일반적인 출력 스트림에서는 데이터를 출력하고 나면 자동으로 flush() 매서드를 호출할 수 있는 기능을 제공하는 경우가 많음
### 표준 입출력
- 표준 입력
  + 자바에서는 표준 입출력 기능을 System 클래스를 통해 제공함
  + 표준 입출력은 왜 java.lang 패키지를 통해 제공될까?
    * java.lang 패키지는 자바 프로그램 개발에 있어 기본이 되는 필수 API들이 들어있는 클래스임
    * 결국 표준 입출력을 지원하는 System 클래스를 java.lang 패키지에서 제공함으로써 모든 프로그램에서 기본적으로 표준 입출력을 사용할 수 있도록 하기 위함임
  + System 클래스에 in이라는 클래스 변수로 제공됨
  + System.in 변수의 타입이 InputStream이라는 점에 주의해야함
    * 최상위 클래스이면서 추상 클래스임
    * 객체를 생성할 수 없는 클래스
  + System 클래스의 in 변수는 입력 스트림 객체를 참조하며, 이를 통해 키보드 입력을 처리할 수 있음
  + 변수의 타입은 InputStream 클래스이지만, 실제 참조하는 객체는 InputStream의 자식 객체임을 암시함
  + 자연스러운 형변환이 지원되기 때문에 가능한 현상임
  + JVM이 메모리로 올라오면서 미리 객체를 생성해 놓는 대표적인 객체임
  + 자료형이 InputStream이기 때문에 바이트 단위로만 입출력이 허용됨
  + 키보드에서 입력하는 자료는 때에 따라서 두 바이트가 합쳐져야 의미를 가지는 경우가 있음
  + 영문과 한글의 처리를 분리해서 구성해야 제대로 인식할 수 있음
  + System.in.read(); : system 클래스를 이용하여 키보드 입력을 읽어 들이기 위한 구문
- 표준 출력
  + 자바 언어를 처음 학습할 때 사용하는 문장 중 하나가 System.out.println() 매서드임
    * PrintStream 타입으로 선언되어 있음
    * PrintStream은 OutputStream 클래스의 후손 클래스로 Exception을 안전하게 처리한 매서드로만 구성되어 있음
    * 따라서 System.out을 이용하여 출력할 때는 try-catch 구문을 이용한 예외 처리 로직이 필요 없음
  + System.out 변수가 참조하는 PrintStream 타입의 객체에는 다양한 타입의 데이터를 출력하기 위한 print() println() 매서드가 데이터 타입별로 Overloading 되어 있음
### 파일 입출력
- FileInputStream / FileOutputStream
  + FileInputStream 클래스
    * InputStream 클래스를 상속한 자식 클래스로 하드 디스크 상에 존재하는 파일로부터 바이트 단위의 입력을 처리하는 클래스
    * 출발 지점-----"스트림을 생성하는 클래스"------>도착지점
    * 생성자의 인자로는 File 객체를 주거나 파일의 이름을 직접 String 형태로 줄 수 있음
    * 파일의 이름을 String 형태로 주는 경우가 많은 파일이 존재하지 않을 가능성도 있으므로 FileNotFoundException에 대한 예외 처리를 해야함
  + FileOutputStream 클래스
    * OutputStream 클래스를 상속한 자식 클래스로 파일로 바이트 단위의 출력을 처리하는 클래스
    * Sink 스트림의 일종으로 3개의 생성자가 Overloading 되어 있는데 FileInputStream의 생성자 보다 하나 더 많음
    * FileInputStream의 생성자와 거의 같은 형태인데, 하나 더 있는 생성자의 형식은 append 처리를 위한 논리 변수를 인자로 가짐
      * 이 값이 true로 설정되면 기존에 존재하고 있는 파일의 가장 뒷부분에 데이터를 연결하여 출력함
- 버퍼를 이용한 파일 입출력
  + 보다 효율적인 프로그램을 작성하고 싶다면?
    * 기계적인 동작의 횟수를 줄이는 것이 좋음
    * 입출력 횟수를 줄이면 프로그램의 효율을 높일 수 있고, 더 빠른 프로그램으로 개선할 수 있음
    * 1바이트 씩 읽어들이는 read() 매서드 보다 한꺼번에 많은 데이터를 바이트의 배열로 읽어들이는 read(byte[]) 매서드가 효율적
  + 버퍼의 크기가 무조건 파일 크기만큼 크면 성능이 좋아질까?
    * 버퍼가 크면 메모리의 낭비를 유발할 수 있음
    * 파일의 크기가 예상하는 것보다 훨씬 큰 경우 충분한 메모리를 준비할 수 없는 상황도 발생할 수 있음
    * 버퍼의 크기는 적정선에서 만족할 수 있도록 잡는 것이 필요함
    * 1024,2048,4096와 같이 배수 형식으로 준비하는 것이 일반적임
- BufferedInputStream / BufferedOutputStream
  + 사용자가 일일이 버퍼를 지정하여 입출력하는 것보다 조금 더 편리하게 입출력할 수 있는 방법
  + 위 두개는 2차 스트림의 일종으로 이미 존재하고 있는 스트림을 이용하여 새로운 기능을 추가하는 형식으로 구성되어 있음
  + 1차 스트림을 서울과 부산을 연결하는 도로라고 하면, 2차 스트림은 차로와 신호등같이 훨씬 빠르고 안전하게 차가 지날 수 있도록 해주는 역할이다.
    * FileInputStream : 1차 스트림이기 때문에 미리 만들어져 있는 스트림 없이 자신의 객체를 생성하여 입력을 시도할 수 있음
    * BufferedInputStream : 미리 만들어진 스트림을 생성자의 인자로 받아들여 객체를 생성함
  + 1바이트 씩 읽고 쓴느 모든 작업이 내부적으로 버퍼를 대상으로 일어남
  + 필요에 따라 버퍼와 파일 간에 입출력이 간헐적으로 발생하므로 전체적인 입출력 성능이 향상됨
  + 파일로부터 버퍼의 크기만큼 데이터를 가져오고, 채워진 버퍼로부터 1바이트 읽어드림
  + 버퍼가 모두 채워지거나 flush() 명령을 만나면 출력
- 





























